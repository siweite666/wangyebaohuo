name: Parallel URL Fetch

on:
  schedule:
    - cron: '*/30 * * * *'  # æ¯30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
  workflow_dispatch:  # å…è®¸æ‰‹åŠ¨è§¦å‘

jobs:
  fetch-urls:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Fetch URLs in parallel
      run: |
        # ä» GitHub Secrets ä¸­è¯»å–ä¿æ´»ç½‘å€
        IFS=$',ï¼Œ' read -r -a http <<< "${{ secrets.http }}"
        
        for url in "${http[@]}"; do
          response=$(curl -sk "$url" || true)
          if [[ "$response" == *"ç½‘é¡µä¿æ´»å¯åŠ¨"* ]]; then
            echo "ğŸ‰æ­å–œï¼$url âœ…è¿è¡Œæ­£å¸¸ï¼ŒæˆåŠŸæ‹‰èµ·ä¸€æ¬¡ä¿æ´»"
          else
            echo "ğŸ’¥æ¯å…·ï¼$url âŒè¿è¡Œå¤±è´¥ï¼Œâš ï¸ä¿æ´»ç½‘å€æ˜¯å¦æ­£ç¡®æˆ–è€…Serv00ç‚¸äº†"
          fi
        done
        wait
